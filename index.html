<html>
    <head>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="mycssfile.css">
        <script>
            function validateEmail(email) {
              const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
              return re.test(String(email).toLowerCase());
            }
            function validateForm(id) {
              let x = document.forms['myForm'];
              let len = x.length;
              let i = 0;
              let elementId = "message";
              let endLoop = false;
              let buttonCheck = true;
              while (true){
                x[i].style.borderColor= "black";
                document.getElementById(elementId+(i+1)).innerHTML = "";
               
                if(x[i].value == "" && i < 4){
                  
                    x[i].style.borderColor= "red";
                    document.getElementById(elementId+(i+1)).style.color="red";
                    document.getElementById(elementId+(i+1)).innerHTML = "This field can't be empty!";
                    buttonCheck = false;
                }else if(x[i].name == "age"){
                    if(x[i].value < 18 || x[i].value > 150){
                      document.getElementById(elementId+(i+1)).style.color="red";
                      document.getElementById(elementId+(i+1)).innerHTML = "Age Should be between 18-150 !";
                      buttonCheck = false;
                    }

                }else if(x[i].name == "email"){
                      let myEmails = x[i].value;
                      const emailArray = myEmails.split(",");
                      let arrLength = emailArray.length;
                      for(let k = 0; k < arrLength; k++){
                          let check = validateEmail(emailArray[k]);
                          if(!check){
                            document.getElementById(elementId+(i+1)).style.color="red";
                            document.getElementById(elementId+(i+1)).innerHTML = "'" + emailArray[k] + "' is not a valid email !<br> multiple emails should be comma seperated";
                            buttonCheck = false;
                          }
                      }
                }else if(x[i].name == "phone"){
                  if(!(x[i].value.length == 11)){
                    document.getElementById(elementId+(i+1)).style.color="red";
                    document.getElementById(elementId+(i+1)).innerHTML = "phone number length should be '11' !";
                    buttonCheck = false;
                  }
                }else if(x[i].name == "pass"){
                  document.getElementById(elementId+(i+1)).style.color="red";
                  let passCheck = true;
                  let passLen = x[i].value.length;
                  if(passLen < 8){
                    document.getElementById(elementId+(i+1)).innerHTML = "Password minimum length should be 8 !";
                    buttonCheck = false;
                    passCheck = false;
                  }else{
                    if(!(/[A-Za-z]/.test(x[i].value))){
                      document.getElementById(elementId+(i+1)).innerHTML = "Password should contain atleast one alphabet A-Z, a-z !";
                      buttonCheck = false;
                      passCheck = false;
                    }else {if(!(/[A-Z]/.test(x[i].value))){
                      document.getElementById(elementId+(i+1)).innerHTML += "<br>Password should contain atleast one upperCase A-Z letter !";
                      buttonCheck = false;
                      passCheck  = false;
                    } if(!(/[a-z]/.test(x[i].value))){
                      document.getElementById(elementId+(i+1)).innerHTML += "<br>Password should contain atleast one lowerCase a-z letter !";
                      buttonCheck = false;
                      passCheck = false;
                    }}
                    if(!(/[0-9]/.test(x[i].value))){
                      document.getElementById(elementId+(i+1)).innerHTML += "<br>Password should contain atleast one number 0-9 !";
                      buttonCheck = false;
                      passCheck = false;
                    }
                    if((/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/.test(x[i].value))){
                      document.getElementById(elementId+(i+1)).innerHTML += "<br>Password should not contain any special character !";
                      buttonCheck = false;
                      passCheck = false;
                    }
                    if(passCheck){  
                    document.getElementById(elementId+(i+1)).style.color="green";
                    document.getElementById(elementId+(i+1)).innerHTML = "Perfectly fine";
                    }
                    
                  }
                }else if(x[i].name == "pass2"){
                  document.getElementById(elementId+(i+1)).style.color="red";
                  pass = document.forms['myForm']['pass'].value;
                  if(!(x[i].value === pass)){
                    document.getElementById(elementId+(i+1)).innerHTML = "Password didn't matched !";
                    buttonCheck = false;
                  }else{
                    document.getElementById(elementId+(i+1)).style.color="green";
                    document.getElementById(elementId+(i+1)).innerHTML = "Password matched";
                  }

                }
                ++i;
                if(endLoop){
                  break;
                }

                if(id == x[i]){
                  endLoop=true;
                }
              }

                document.getElementById("btn1").disabled = true;
           
                  if(buttonCheck){
                    document.getElementById("btn1").disabled = false;
                  }

      
       
            }
        </script>
        <style>

        </style>
    </head>
    <body>
        <h1 class="text-center">My Form</h1>
        <div class="my-container">
            <form name="myForm" action="/action_page.php" method="post">
                First Name: <input  onkeyup="validateForm(this)" oninput="validateForm(this)" type="text" name="fname">
                <p id="message1"></p>
                Last Name: <input  onkeyup="validateForm(this)" oninput="validateForm(this)" type="text" name="lname">
                <p id="message2"></p>
                Age: <input  onkeyup="validateForm(this)"  oninput="validateForm(this)" type="number" name="age">
                <p id="message3"></p>
                Email: <input  onkeyup="validateForm(this)" oninput="validateForm(this)" type="email" name="email">
                <p id="message4"></p>
                Phone: <input  onkeyup="validateForm(this)" oninput="validateForm(this)" type="tel" name="phone">
                <p id="message5"></p>
                Password: <input  onkeyup="validateForm(this)" oninput="validateForm(this)" type="password" name="pass">
                <p id="message6"></p>
                Confirm Password: <input  onkeyup="validateForm(this)" oninput="validateForm(this)" type="password" name="pass2">
                <p id="message7"></p>
                <input id="btn1" class="mt-3 btn btn-primary" type="submit" value="Submit" disabled>
            </form>
        </div>
    </body>
</html>